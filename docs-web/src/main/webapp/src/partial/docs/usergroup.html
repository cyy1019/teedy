<div class="row">
  <div class="col-md-4">
    <!-- Group Search Panel -->
    <div class="well well-3d">
      <p class="input-group">
        <span class="input-group-addon"><span class="fas fa-search"></span></span>
        <input type="search" class="form-control" ng-attr-placeholder="{{ 'usergroup.search_groups' | translate }}" ng-model="searchGroup">
      </p>

      <table class="table table-hover">
        <tbody>
        <tr class="pointer" ng-repeat="group in groups | filter: searchGroup"
            ng-click="openGroup(group)" ng-class="{ active: $stateParams.name == group.name }">
          <td>{{ group.name }}</td>
        </tr>
        </tbody>
      </table>

      <div class="well-3d-background">
        <span class="fas fa-users"></span>
      </div>
    </div>

    <!-- User Search Panel -->
    <div class="well well-3d">
      <p class="input-group">
        <span class="input-group-addon"><span class="fas fa-search"></span></span>
        <input type="search" class="form-control" ng-attr-placeholder="{{ 'usergroup.search_users' | translate }}" ng-model="searchUser">
      </p>

      <table class="table table-hover">
        <tbody>
        <tr class="pointer" ng-repeat="user in users | filter: searchUser"
            ng-click="openUser(user)" ng-class="{ active: $stateParams.username == user.username }">
          <td>
            <span class="fas fa-user"></span>
            {{ user.username }}
            <span class="text-muted" ng-if="userInfo.username == user.username">{{ 'usergroup.you' | translate }}</span>
          </td>
        </tr>
        </tbody>
      </table>

      <div class="well-3d-background">
        <span class="fas fa-user"></span>
      </div>
    </div>
  </div>

  <div class="col-md-8">
    <div ui-view="sub"></div>

    <!-- Admin Pending Requests Panel -->
    <div class="well well-3d" ng-if="userInfo.username === 'admin' && selectedUser && selectedUser.username === 'admin'">
      <h4>
        <span class="fas fa-user-plus"></span>
        {{ 'usergroup.pending_requests' | translate }}
      </h4>

      <table class="table table-hover">
        <thead>
        <tr>
          <th>{{ 'login.username' | translate }}</th>
          <th>{{ 'login.email' | translate }}</th>
          <th>{{ 'usergroup.action' | translate }}</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="request in pendingRequests">
          <td>{{ request.username }}</td>
          <td>{{ request.email }}</td>
          <td>
            <button class="btn btn-success btn-xs" ng-click="approveRequest(request.id)" style="background: indianred;">
              <span class="fas fa-check"></span> {{ 'usergroup.approve' | translate }}
            </button>
            <button class="btn btn-danger btn-xs" ng-click="rejectRequest(request.id)" style="background: lightskyblue;">
              <span class="fas fa-times"></span> {{ 'usergroup.reject' | translate }}
            </button>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
    
    <!-- Non-admin user message -->
    <div class="well well-3d" ng-if="userInfo.username !== 'admin' && pendingRequests && pendingRequests.length > 0">
      <h4>
        <span class="fas fa-user-plus"></span>
        {{ 'usergroup.pending_requests' | translate }}
      </h4>
      <div class="alert alert-warning">
        <span class="fas fa-exclamation-triangle"></span>
        {{ 'usergroup.admin_required' | translate }}
      </div>
    </div>
  </div>
</div>
